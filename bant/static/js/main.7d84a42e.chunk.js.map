{"version":3,"sources":["dateHandler.js","images/chatx.png","images/default.jpeg","store/actions/auth.js","store/actions/actionTypes.js","components/auth/auth.js","components/chatMain/nav.js","components/chatMain/incoming.js","components/chatMain/outgoing.js","components/chatMain/conversation.js","components/chatMain/searchResult.js","components/chatMain/chatBox.js","components/profile/profile.js","router.js","App.js","serviceWorker.js","store/utility.js","store/reducers/auth.js","index.js"],"names":["month","String","prototype","lpad","padString","length","string","this","toString","twelveHourClock","hours","meridian","datePrefix","day","module","exports","date","date_diff","Date","getDate","month_diff","getUTCMonth","getHours","getMinutes","getFullYear","loc","window","location","auth_url","origin","authSuccess","token","type","authFail","error","logout","localStorage","removeItem","checkAuthTimeout","expirationTime","dispatch","setTimeout","Auth","props","state","loginEmail","loginPassword","signUpEmail","signUpName","signUpPassword1","signUpPassword2","handleChange","bind","handleSubmit","container","$","signUpButton","click","event","removeClass","addClass","target","name","value","setState","preventDefault","id","onAuth","onRegister","className","isAuthenticated","push","to","method","onSubmit","style","placeholder","onChange","getItem","href","rel","Component","withRouter","connect","stateError","split","loading","email","password","fetch","headers","body","JSON","stringify","then","res","json","data","errorMessage","parse","Error","expirationDate","getTime","setItem","catch","err","action","pass1","pass2","password1","password2","emailErrors","passwordErrors","Nav","searchKey","handleLogout","handleClear","handleSearch","clear","search","src","require","process","alt","data-toggle","data-target","aria-controls","aria-expanded","aria-label","onClick","date_handler","Incoming","picurl","Outgoing","Conversation","status","select","SearchResult","ChatBox","user","profilePicUrl","roomNames","rooms","activeRoom","memo","typing","chats","searchItem","sub","user_url","rooms_url","chats_url","_isMounted","fetchUser","fetchConversations","makeConversation","selectConversation","selectSearchItem","makeChat","fetchChats","addChat","unmount_time","prevProps","prevState","snapshot","messages","animate","scrollTop","get","scrollHeight","socket","send","onLogout","response","ok","statusText","Authorization","newNames","newRooms","room","rm","console","log","handleErr","roomName","newChats","chat","other_email","other_name","other_status","other_profilepic","key","pic_url","User","item","receiver","room_name","onmessage","e","custom_type","matches","serachKey","map","makeSearchItem","cols","rows","aria-hidden","actions","Profile","loggedin","view","coverUrl","phone","age","gender","address","profilePicUpload","profilePicExtension","backup","changing","setView","back","save","profilPicUpload","getFile","socketSend","ensureProfilePic","result","file","files","document","getElementById","accept","binary","text","i","exec","undefined","tempPic","URL","createObjectURL","fileReader","FileReader","indexOf","readAsDataURL","readAsArrayBuffer","hidden","readOnly","aria-describedby","MyRouter","onopen","onclose","onerror","exact","path","proc","protocol","endpoint","host","ReconnectingWebSocket","App","onTryAutoSignup","Boolean","hostname","match","updateObject","oldObject","updatedProperties","initialState","authStart","authLogout","reducer","composeEnhances","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","app","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.7d84a42e.chunk.js","sourcesContent":["var month = [\n    \"Jan\", \"Feb\",\n    \"Mar\", \"Apr\",\n    \"May\", \"Jun\",\n    \"Jul\", \"Aug\",\n    \"Sep\", \"Oct\",\n    \"Nov\", \"Dec\"\n]\nconst date_handler = (date) => {\n    const date_diff = new Date().getDate() - date.getDate()\n    const month_diff = new Date().getUTCMonth() - date.getUTCMonth()\n    const {hours, meridian} = twelveHourClock(date.getHours())\n\n   if(date_diff === 1 && month_diff === 0){\n        return`Yesterday ${hours}:${date.getMinutes()}${meridian}`\n    } else if(date_diff === 0 && month_diff === 0) {\n        return`${hours}:${date.getMinutes()}${meridian}`\n    } else {\n       return`${month[date.getUTCMonth()]} ${datePrefix(date.getDate())} ${date.getFullYear()}`\n    }\n}\n\nString.prototype.lpad = function(padString, length) {\n    let string = this.toString()\n    while (string.length < length)\n        string = padString + string;\n    return string;\n}\n\nconst twelveHourClock = (hours) => {\n    if(hours < 12) {\n        const hour = (hours).toString().lpad(\"0\", 2)\n        return {hours: hour, meridian: 'am'}\n    } else {\n        const hour = (hours - 12).toString().lpad(\"0\", 2)\n        return {hours: hour, meridian: 'pm'}\n    }\n}\n\nconst datePrefix = (day) => {\n    if(day in [1, 21, 31]) {\n        return `${day}st`\n    }else if(day in [12, 22]) {\n        return `${day}nd`\n    }else if(day in [3, 23]) {\n        return `${day}rd`\n    }else {\n        return `${day}th`\n    }\n}\n\nmodule.exports = date_handler","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAAFBklEQVR4nO3bW2gcZRQH8P+ZWXPZjW3farS3bAut+GZanxOlNG4ukqrz0MtLQbBIFRSfXR8EQTGltQUF8aFQcVHXhG1sCbi+J/WtWCHd5tKLQcFLO5tLs3N8sIIU+83MmvN9Bc/v9Tu75+z+SWa+mVlAKaWUUkoppZRSSiml/g9I6o3P5StsWu+vDYj1boareT2JN1XJaQCOaQCOaQCOaQCOaQCOaQCOaQCOaQCOaQCOaQCOaQCOaQCOaQCOaQCOaQCOaQCOSQawYloc3Tn6sGDvVMZ3jK+LKVmW6i0ZwG3TYstKy6OCvVOJ7kSPxZTckuotGcAN4yqtbhfsnQr5FDfLTaneggHwj6bVCCjI9U6t37RIhMtSjQUD8KbM6/RctaeakeufTLWnmiHiIXMVx3yW5okFEHH0bUzJpnA+PCLVP6nFufAlZhiPR8xe3GdpmlgAF69enAIwZ6ohRnEiP7FeaoY45W3lDQy8FVM2O1mb/F5qBrEAiihGRDgTU9a5jOWzJZR8qTnup4SS3+JlzgLYaCxkPlNEMZKaQ3Qj5q1mTgFYMtUQUMjmsydthlBCyc/lcx8C9GxM6ZIfPXRachbRAPpm+26C+eO4OgKOZvPZMRv/jsrbyhtyXdkKwC/HV9NHfbN9YqeggOCzoX8b3zG+jqPoMoDOBOW/MPB+vb0+ElwKjDvptKo91Uw4Hx4hxtsAHknwkoWV6M6u4Znh39ZyjntZeUC2kq/sJ+CLFP2uMzDmgyuNBl3NddTney8Fxp31vapPlDrC29nN8JEn0AARD8Wd7fwDE/H+wpXBr9P0bIa1J5TP5c8dB/g1W/3+o5H+2sDrNhpZuxoa1sI3+K+/ggcaEcbCWv1NW/2sBRAgaHied4iAsq2eTfgK5AUBgoathlbvBxSmC8u3a/UXGTgOwPiDCMsYwEhYqweF6YLYped/4+SGDDF7sHj8SYAAcvNd2GxW3VZtW/TCswwM2+ybFAHl9ih3oHem17h5XEvWUi+h5IdeeOZB/fIBgIHhRT/83OZVWmsB5LraPyDgBVv9msWMoXAufM9WP5sbsS9TvOQawKMgrxI1opmWxZb5fQv7wjQ9L2y8kFtpX9ns+34XczQAYAjApoQv54j4+cErg+JnbOIBTOQn1q9g+QckuxTxM8DvZLd0nOr9rnd1Lecooug9tb37EDO9m3CWBV7F4wNzA7+u5Rz3kr8W1FU5wYRj8ZVcIc8/WJgu/CE6z47xdVEUfUZJbokyn+i/Oii6excN4PzW850Nf7UGoC2m9HRYq79qawNUQsnP5rMnCTgaU7rkNzJ5ySuiogfhKLP6CmK/fK5M1qaO2dx9Bgga9Vr9GAPjMaVtdz+DGMk7Yh4zDptqiHCDPP+g5B2n+wkQNFrRegDAT6Y6Zhwqoij2PYm9cXdX924AW4xFERel/+eb7K3t/R1ExZiyrXvye56UmkEuWfKejim51r6141Op/kllN2c/AXDdVMPgZ6T6Cx4Dot2mVWKU1/pUsxl3Zxg11XiEbqn+ggHQTnNn7xu53unEHYyZsUuqt+RZkPH2X4Mb04K9U/HZj5slycatKZIBdBgX2xdFnzZIoy17y3gMACD2KL1kAC2mxbQ32SUlmKVVqrf+QsYxDcAxDcAxDcAxDcAxDcAxDcAxDcAxDcAxDcAxDcAxDcAxDcAxDcAxDcAxDcAxDUAppZRSSimllFJKKaWUBX8C8JR3Wq//IcEAAAAASUVORK5CYII=\"","module.exports = \"data:image/jpeg;base64,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\"","import * as actionTypes from './actionTypes';\nconst loc = window.location\nconst auth_url = `${loc.origin}/authenticate/`\n// const auth_url = `http://localhost:8000/authenticate/`\n\nexport const authStart = () => {\n    return {\n        type: actionTypes.AUTH_START\n    }\n}\n\nexport const authSuccess = token => {\n    return {\n        type: actionTypes.AUTH_SUCCESS,\n        token: token\n    }\n}\n\nexport const authFail = (error) => {\n    return {\n        type: actionTypes.AUTH_FAIL,\n        error: error,\n    }\n}\n\nexport const logout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('expirationDate');\n    return {\n        type: actionTypes.AUTH_LOGOUT\n    };\n}\n\nexport const checkAuthTimeout = expirationTime => {\n    return dispatch => {\n        setTimeout(() => {\n            dispatch(logout());\n        }, expirationTime * 1000)\n    }\n}\n\nexport const authLogin = (email, password) => {\n    return dispatch => {\n        dispatch(authStart());\n        fetch(auth_url, {\n            'method': 'POST',\n            headers: {\n               'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                email: email,\n                password: password\n            })\n        })\n        .then(res => res.json())\n            .then(data => {\n                const error = data[0]\n                const errorMessage = error ? JSON.parse(error)['non_field_errors']: null\n                if(errorMessage) {\n                    throw Error (errorMessage)\n                }\n                const token = data.token;\n                if (token){\n                    const expirationDate = new Date(new Date().getTime() + 3600*24 * 1000);\n                    localStorage.setItem('token', token);\n                    localStorage.setItem('expirationDate', expirationDate);\n                    dispatch(authSuccess(token));\n                    dispatch(checkAuthTimeout(3600*24));\n                }\n            })\n                .catch(err => {\n                    dispatch(authFail(err))\n                })\n    }\n}\n\nexport const authSignup = (name, email, password1, password2) => {\n    return dispatch => {\n        dispatch(authStart());\n        fetch(auth_url, {\n            'method': 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                name: name,\n                email: email,\n                password1: password1,\n                password2: password2\n            })\n        })\n        .then(res => res.json())\n            .then(data => {\n                const emailErrors = data['email']\n                const passwordErrors = data['password']\n\n                if (emailErrors || passwordErrors) {\n                    localStorage.setItem('emailErrors', emailErrors)\n                    localStorage.setItem('passwordErrors', passwordErrors)\n                    throw Error(\"Bad Input\")\n                }\n                const token = data.token;\n                if (token){\n                    localStorage.removeItem('emailErrors')\n                    localStorage.removeItem('passwordErrors')\n                    const expirationDate = new Date(new Date().getTime() + 3600*24 * 1000);\n                    localStorage.setItem('token', token);\n                    localStorage.setItem('expirationDate', expirationDate);\n                    dispatch(authSuccess(token));\n                    dispatch(checkAuthTimeout(3600*24));\n                }\n            })\n                .catch(err => {\n                    dispatch(authFail(err))\n                })\n    }\n}\n\nexport const authCheckState = () => {\n    return dispatch => {\n        const token = localStorage.getItem('token');\n        if (token === undefined) {\n            dispatch(logout());\n        } else {\n            const expirationDate = new Date(localStorage.getItem('expirationDate'));\n            if ( expirationDate <= new Date() ) {\n                dispatch(logout());\n            } else {\n                dispatch(authSuccess(token));\n                dispatch(checkAuthTimeout( (expirationDate.getTime() - new Date().getTime()) / 1000) );\n            }\n        }\n    }\n}","export const AUTH_START = 'AUTH_START';\nexport const AUTH_SUCCESS = 'AUTH_SUCCESS';\nexport const AUTH_FAIL = 'AUTH_FAIL';\nexport const AUTH_LOGOUT = 'AUTH_LOGOUT';","import React, {Component} from \"react\";\nimport $ from \"jquery\"\nimport \"../../login.css\"\nimport {Redirect, withRouter} from \"react-router\";\nimport * as action from \"../../store/actions/auth\"\nimport {connect} from \"react-redux\"\n\nclass Auth extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loginEmail:\"\",\n            loginPassword:\"\",\n            signUpEmail:\"\",\n            signUpName:\"\",\n            signUpPassword1:\"\",\n            signUpPassword2:\"\"\n        }\n        this.handleChange = this.handleChange.bind(this)\n        this.handleSubmit = this.handleSubmit.bind(this)\n    }\n    componentDidMount() {\n        localStorage.removeItem('emailErrors')\n        localStorage.removeItem('passwordErrors')\n        const container = $('#container')\n        const signUpButton = $(\"#signUp\")\n        const signInButton = $(\"#signIn\")\n        signInButton.click(event => {\n            container.removeClass(\"right-panel-active\")\n        })\n        signUpButton.click(event => {\n            container.addClass(\"right-panel-active\")\n        })\n    }\n\n    handleChange(event) {\n        const {name, value} = event.target\n        this.setState({[name]: value})\n    }\n\n    handleSubmit(event){\n        event.preventDefault()\n        const {id} = event.target\n        if(id === \"loginForm\") {\n            this.props.onAuth(this.state.loginEmail, this.state.loginPassword)\n            this.setState({loginPassword: \"\"})\n        } else if(id === \"signupForm\") {\n            this.props.onRegister(this.state.signUpName, this.state.signUpEmail, this.state.signUpPassword1, this.state.signUpPassword2)\n            this.setState({signUpPassword1: \"\"})\n            this.setState({signUpPassword2: \"\"})\n        }\n    }\n\n    render() {\n        return(\n            <span id=\"authbody\" className=\"authbody\">\n                {\n                    this.props.isAuthenticated ? <Redirect push to={\"/chat\"} /> : null\n                }\n                <main className=\"authbody container\" id=\"container\">\n                    <div className=\"authbody form-container sign-up-container\">\n                        <form method=\"post\" id=\"signupForm\" onSubmit={this.handleSubmit}>\n                            <div className=\"authbody\">\n                                <h1 className=\"authbody\">Create Account</h1>\n                                <span className=\"authbody\">or use your email for registration</span>\n                            </div>\n                            <div style={{\"color\": \"#ba2121\", \"width\": \"100%\"}} id = \"formDiv\" className=\"authbody\">\n                                <input\n                                    className=\"authbody form-control\"\n                                    type={\"text\"}\n                                    name={\"signUpName\"}\n                                    placeholder=\"John Doe\"\n                                    onChange={this.handleChange}\n                                    value={this.state.signUpName}\n                                />\n                                {\n                                    localStorage.getItem('emailErrors')\n                                        ?\n                                    <h1 className={'error'}>\n                                        {localStorage.getItem('emailErrors')}\n                                    </h1>\n                                        :\n                                    null\n                                }\n                                <input\n                                    className=\"authbody form-control\"\n                                    type={\"email\"}\n                                    name={\"signUpEmail\"}\n                                    placeholder=\"example@mail.com\"\n                                    onChange={this.handleChange}\n                                    value={this.state.signUpEmail}\n                                />\n                                {\n                                    localStorage.getItem('passwordErrors')\n                                        ?\n                                    <h1 className={'error'}>\n                                        {localStorage.getItem('passwordErrors')}\n                                    </h1>\n                                        :\n                                    null\n                                }\n                                <input\n                                    className=\"authbody form-control\"\n                                    type={\"password\"}\n                                    name={\"signUpPassword1\"}\n                                    placeholder=\"Password\"\n                                    onChange={this.handleChange}\n                                    value={this.state.signUpPassword1}\n                                />\n                                <input\n\n                                    className=\"authbody form-control\"\n                                    type={\"password\"}\n                                    name={\"signUpPassword2\"}\n                                    placeholder=\"Confirm Password\"\n                                    onChange={this.handleChange}\n                                    value={this.state.signUpPassword2}\n                                />\n                            </div>\n                            <button type=\"submit\" id=\"signupBtn\" className=\"authbody\">Sign Up</button>\n                        </form>\n                    </div>\n                    <div className=\"authbody form-container sign-in-container\">\n                        <form method=\"get\" id=\"loginForm\" className=\"authbody\" onSubmit={this.handleSubmit}>\n                            <h1 className=\"authbody\">Sign in</h1>\n                            <span className=\"authbody\">or use your account</span>\n                            {\n                                this.props.error === \"Unable to log in with provided credentials.\"\n                                    ?\n                                <h1 className={'error'} style={{'color': 'red'}}>\n                                    Invalid Username or Password\n                                </h1>\n                                    :\n                                null\n                            }\n                            <input\n                                className=\"authbody form-control\"\n                                type={\"email\"}\n                                name={\"loginEmail\"}\n                                placeholder=\"Email\"\n                                onChange={this.handleChange}\n                                value={this.state.loginEmail}\n                            />\n                            <input\n                                className=\"authbody form-control\"\n                                type={\"password\"}\n                                name={\"loginPassword\"}\n                                placeholder=\"Password\"\n                                onChange={this.handleChange}\n                                value={this.state.loginPassword}\n                            />\n                            <a href=\"resetPassword\" className=\"authbody\">Forgot your password?</a>\n                            <button type=\"submit\" id=\"loginBtn\" className=\"authbody\">Sign In</button>\n                        </form>\n                    </div>\n                    <div className=\"authbody overlay-container\">\n                        <div className=\"authbody overlay\">\n                            <div className=\"authbody overlay-panel overlay-left right-panel-active\">\n                                <h1 className=\"authbody\">Welcome Back!</h1>\n                                <p className=\"authbody\">To keep connected with us please login with your personal info</p>\n                                <button className=\"authbody ghost\" id=\"signIn\">Sign In</button>\n                            </div>\n                            <div className=\"authbody overlay-panel overlay-right\">\n                                <h1 className=\"authbody\">Hello, Friend!</h1>\n                                <p className=\"authbody\">Enter your personal details and start journey with us</p>\n                                <button className=\"authbody ghost\" id=\"signUp\">Sign Up</button>\n                            </div>\n                        </div>\n                    </div>\n                </main>\n                <footer className=\"authbody\">\n                    <p className=\"authbody\">\n                        Template Created by\n                        <a className=\"authbody\" target=\"_blank\" href=\"https://florin-pop.com\" rel=\"noopener noreferrer\">\n                            Florin Pop\n                        </a>\n                        - Read how I created this and how you can join the challenge\n                        <a className=\"authbody\" target=\"_blank\"\n                           href=\"https://www.florin-pop.com/blog/2019/03/double-slider-sign-in-up-form/\"\n                            rel=\"noopener noreferrer\">here\n                        </a>.\n                    </p>\n                </footer>\n            </span>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    const stateError = state.error? state.error.toString().split(\": \")[1]:state.error\n    return {\n        loading: state.loading,\n        error: stateError\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return{\n        onAuth: (email, password) => dispatch(action.authLogin(email, password)),\n        onRegister: (name, email, pass1, pass2) => dispatch(action.authSignup(name, email, pass1, pass2))\n    }\n}\n\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Auth))","import React, {Component} from \"react\";\nimport {Redirect, withRouter} from \"react-router\";\n\nclass Nav extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            searchKey: \"\",\n        }\n        this.handleLogout = this.handleLogout.bind(this)\n        this.handleClear = this.handleClear.bind(this)\n        this.handleSearch = this.handleSearch.bind(this)\n        this.handleSubmit = this.handleSubmit.bind(this)\n    }\n\n    handleLogout(event) {\n        event.preventDefault()\n        this.props.logout()\n    }\n    handleClear(event) {\n        event.preventDefault()\n        this.props.clear()\n    }\n    handleSearch(event){\n        const {value} = event.target\n        this.setState({searchKey: value})\n        this.props.search(value)\n    }\n    handleSubmit(event){\n        event.preventDefault()\n        this.props.search(this.state.searchKey)\n    }\n    profile() {\n        return <Redirect push to={\"/chat\"} />\n    }\n    render() {\n\n        return(\n            <div className=\"row\" id=\"NavBar\">\n                <nav className=\"navbar navbar-expand-lg navbar-light bg-light col-12\">\n\n                    <a className=\"navbar-brand\" href=\"logo\">\n                        <img src={require(process.env.PUBLIC_URL + \"../../images/chatx.png\")} alt=\"logo\" id=\"logo\" />\n                        ChatX\n                    </a>\n                    <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                        <span className=\"navbar-toggler-icon\"/>\n                    </button>\n\n                    <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n\n                        <form className=\"form-inline my-2 my-lg-0\" onSubmit={this.handleSubmit}>\n                            <input\n                                className=\"form-control mr-sm-2\"\n                                type=\"search\"\n                                placeholder=\"Search\"\n                                aria-label=\"Search\"\n                                value={this.state.searchKey}\n                                onChange={this.handleSearch}\n                            />\n                            <button className=\"btn btn-outline-success my-2 my-sm-0\" type=\"submit\">Search</button>\n                        </form>\n                        <ul className=\"navbar-nav ml-auto\">\n                            <li className=\"nav-item\">\n                                <a className=\"nav-link btn btn-primary\" href=\"clear\" onClick={this.handleClear} style={{\"color\": \"yellow\"}}>Clear</a>\n                            </li>\n                            <li className=\"nav-item\">\n                                <a className=\"nav-link btn btn-light\" href=\"logout\" onClick={this.handleLogout}>Logout</a>\n                            </li>\n                            <li className=\"nav-item\">\n                                <a className=\"nav-link btn btn-primary\" href=\"profile\" style={{\"color\": \"yellow\"}}>Profile</a>\n                            </li>\n                        </ul>\n                    </div>\n                </nav>\n            </div>\n        )\n    }\n}\n\nexport default withRouter(Nav)","import React from \"react\";\nconst date_handler = require(\"../../dateHandler\")\n\nfunction Incoming(props){\n    const data = props.props\n    // const picurl = `http://localhost:8000/${data['pic_url']}`\n    const picurl = `/${data['pic_url']}`\n    return(\n        <div className=\"row incoming msg-holder mb-2\">\n            <div className=\"msg-toon-holder\">\n                <img src={picurl} alt=\"toon-img\" className=\"msg-toon rounded-circle\"/>\n            </div>\n            <div className=\"text-holder\">\n                <p className=\"rounded-lg\">{data['memo']}\n                    <br/><span className=\"message-time\">{date_handler(data.date)}</span>\n                </p>\n            </div>\n        </div>\n    )\n}\nexport default Incoming","import React from \"react\";\nconst date_handler = require(\"../../dateHandler\")\n\nfunction Outgoing(props){\n    const data = props.props\n    // const picurl = `http://localhost:8000${data['pic_url']}`\n    const picurl = `${data['pic_url']}`\n    return(\n        <div className=\"row outgoing msg-holder mb-2 justify-content-end ml-auto\">\n            <div className=\"text-holder\">\n                <p className=\"rounded-left\">{data['memo']}\n                <br/><span className=\"message-time\">{date_handler(data.date)}</span>\n                </p>\n            </div>\n            <div className=\"msg-toon-holder\">\n                <img src={picurl} alt=\"toon-img\" className=\"msg-toon rounded-circle\"/>\n            </div>\n        </div>\n    )\n}\nexport default Outgoing","import React from \"react\";\nconst date_handler = require(\"../../dateHandler\")\n\nfunction Conversation(props){\n    const data = props.props\n    // const picurl = `http://localhost:8000/${data['pic_url']}`\n    const picurl = `/${data['pic_url']}`\n    const statusStyle = status => {\n        if(!status){\n            return( {\"backgroundColor\" : \"red\"})\n        }else{\n            return( {\"backgroundColor\" : \"#0dcd36\"})\n        }\n    }\n    const selectConversation = (event) =>{\n        event.preventDefault()\n        const {id} = event.target\n        data.select(id)\n    }\n    return(\n        <>\n            <a href={data['name']} className=\"row conversation\" id={data['name']} onClick={selectConversation}>\n                <div className=\"toon-holder\">\n                    <img src={picurl} alt=\"toon-img\" className=\"toon rounded-circle\"/>\n                    <div className=\"status-icon rounded-circle\" style={statusStyle(data['status'])} />\n                </div>\n                <div className=\"message-info-holder\">\n                    <p className=\"message-info\">\n                        <span className=\"row\"><b className=\"col-8\">{data['email']}</b></span>\n                        <span className=\"row\"><span className=\"col\">{date_handler(data.date)}</span></span>\n                    </p>\n                </div>\n            </a><hr/>\n        </>\n    )\n}\nexport default Conversation","import React from \"react\";\n\nfunction SearchResult(props){\n    const data = props.props\n    const selectResult = (event) =>{\n        event.preventDefault()\n        const {id} = event.target\n        data.select(id)\n    }\n    return(\n        <>\n            <a href={data['email']} className=\"row conversation\" id={data['email']} onClick={selectResult}>\n                <div className=\"toon-holder\">\n                    <img src={`/${data['pic_url']}`} alt=\"toon-img\" className=\"toon rounded-circle\"/>\n                    {/*<img src={`http://localhost:8000/${data['pic_url']}`} alt=\"toon-img\" className=\"toon rounded-circle\"/>*/}\n                </div>\n                <div className=\"message-info-holder\">\n                    <p className=\"message-info\">\n                        <span className=\"row\">\n                            <b className=\"col-8\">{data['contact']}</b>\n                            <span className=\"row\">\n                                <span className=\"col\">{data['email']}</span>\n                            </span>\n                        </span>\n                    </p>\n                </div>\n            </a><hr/>\n        </>\n    )\n}\nexport default SearchResult","import React, {Component} from \"react\";\nimport \"../../styles.css\"\nimport Nav from \"./nav\";\nimport Incoming from \"./incoming\";\nimport Outgoing from \"./outgoing\";\nimport Conversation from \"./conversation\";\nimport SearchResult from \"./searchResult\";\nimport {Redirect, withRouter} from \"react-router\";\nimport * as actions from \"../../store/actions/auth\"\nimport {connect} from \"react-redux\";\nimport $ from \"jquery\"\n\nclass ChatBox extends Component {\n    constructor() {\n        super();\n        this.state = {\n            user: \"\",\n            profilePicUrl: \"\",\n            roomNames: [],\n            rooms:{},\n            activeRoom: \"\",\n            memo:\"\",\n            typing: false,\n            chats: [],\n            search: [],\n            searchItem: \"\",\n            sub: true,\n        }\n        const loc = window.location\n        // this.rooms_url= 'http://localhost:8000/rooms/'\n        // this.chats_url = `http://localhost:8000/chats/`\n        // this.user_url= 'http://localhost:8000/authenticate/'\n        this.user_url = `/authenticate/`\n        this.rooms_url = `/rooms/`\n        this.chats_url = `/chats/`\n        this._isMounted = false\n        this.logout = this.logout.bind(this)\n        this.clear = this.clear.bind(this)\n        this.search = this.search.bind(this)\n        this.fetchUser = this.fetchUser.bind(this)\n        this.fetchConversations = this.fetchConversations.bind(this)\n        this.makeConversation = this.makeConversation.bind(this)\n        this.selectConversation = this.selectConversation.bind(this)\n        this.selectSearchItem = this.selectSearchItem.bind(this)\n        this.makeChat = this.makeChat.bind(this)\n        this.fetchChats = this.fetchChats.bind(this)\n        this.handleChange = this.handleChange.bind(this)\n        this.handleSubmit = this.handleSubmit.bind(this)\n        this.addChat = this.addChat.bind(this)\n    }\n    componentWillUnmount() {\n        this._isMounted = false\n        const unmount_time = new Date()\n        localStorage.setItem(\"unmount_time\", unmount_time)\n    }\n\n    componentDidMount() {\n        const diff = new Date().getTime() - new Date(localStorage.getItem(\"unmount_time\")).getTime()\n        if(diff > 18000000) this.logout()\n        this._isMounted = true\n        if(this._isMounted){\n            this.fetchConversations()\n            this.fetchUser()\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const messages = $(\"#messageSpace\")\n        messages.animate({\n            scrollTop: messages.get(0).scrollHeight\n        }, 10);\n    }\n\n    logout(){\n        this.props.socket.send(JSON.stringify({\n            'type': 'auth',\n            'user':this.state.user,\n            'room_names': this.state.roomNames\n        }))\n        this.props.onLogout()\n    }\n    clear(){\n        this.setState({activeRoom: \"\"})\n        this.setState({chats: []})\n        this.setState({memo: \"\"})\n        this.setState({search: []})\n        this.setState({searchItem: \"\"})\n    }\n    search(value){\n        this.clear()\n        this.props.socket.send(JSON.stringify({\n            \"type\": \"search\",\n            \"user\": this.state.user,\n            \"key\": value\n        }))\n    }\n\n    profile(event) {\n        event.preventDefault()\n    }\n\n    handelError(response){\n        if (!response.ok){\n            throw Error(response.statusText)\n        }\n        return response.json()\n    }\n\n    fetchConversations() {\n        fetch(this.rooms_url, {\n            headers: {\n                Authorization: `Token ${localStorage.getItem(\"token\")}`\n            }\n        }\n        ).then(res => res.json())\n            .then(data => {\n                const rooms = data.rooms\n                const newNames = []\n                const newRooms = {}\n                for (let room in rooms) {\n                    const rm = rooms[room]\n                    const name = rm['roomName1']\n                    newNames.push(name)\n                    newRooms[name] = rm\n                }\n                if(this._isMounted) {\n                    this.setState({user: data.user})\n                    this.setState({roomNames: newNames})\n                    this.setState({rooms: newRooms})\n                    this.props.socket.send(JSON.stringify({\n                        'type': 'sub',\n                        'room_names': newNames,\n                        'email': data.user\n                    }))\n                }\n            }).catch(error => {\n            console.log(error)\n        })\n    }\n    handleErr(res) {\n            if (res.status === 400){\n                throw Error(res.statusText)\n            }\n            return res.json()\n        }\n    fetchUser() {\n        fetch(this.user_url, {\n            headers: {\n                Authorization: `Token ${localStorage.getItem(\"token\")}`\n            }\n        }).then(this.handleErr)\n            .then(data => {\n                if (this._isMounted) {\n                    this.setState({\n                        profilePicUrl: data['profile_pic'],\n                         // profilePicUrl: `http://localhost:8000${data['profile_pic']}`,\n                        email: data['email'],\n                    })\n                }\n            }).catch(err => console.log(err))\n    }\n    fetchChats(roomName){\n        fetch(this.chats_url + `${roomName}/`, {\n            headers:{\n                Authorization: `Token ${localStorage.getItem(\"token\")}`\n            }\n        })\n            .then(res => res.json())\n            .then(data =>{\n                const chats = data\n                const newChats = []\n                for (let chat in chats) {\n                    newChats.push(chats[chat])\n                }\n                if(this._isMounted){\n                    this.setState({chats: newChats})\n                }\n            }).catch(error => {\n            console.log(error)\n        })\n    }\n\n    makeConversation(name) {\n        const room = this.state.rooms[name]\n        if(room) {\n            const date = new Date(room.date)\n            const props = {\n                \"name\": name,\n                \"email\": room.other_email,\n                \"contact\": room.other_name,\n                \"status\": room.other_status,\n                \"pic_url\": room.other_profilepic,\n                \"select\": this.selectConversation,\n                \"date\": date\n            }\n            return <span key={name}><Conversation props={props}/></span>\n        }\n    }\n    selectConversation(name){\n        this.fetchChats(name)\n        this.setState({activeRoom: name})\n    }\n    makeChat(chat){\n        const date = new Date(chat.date)\n        const pic_url = this.state.rooms[this.state.activeRoom][`other_profilepic`]\n        if(chat.User === this.state.user){\n            const props = {\n                'memo': chat.memo,\n                'date': date,\n                'pic_url': this.state.profilePicUrl\n            }\n            return <span key={chat.id}><Outgoing props={props}/></span>\n        }else {\n            const props = {\n                'memo': chat.memo,\n                'date': date,\n                'pic_url': pic_url\n            }\n            return <span key={chat.id}><Incoming props={props}/></span>\n        }\n    }\n    makeSearchItem(item){\n        const props = {\n                'email': item['email'],\n                'contact': item['name'],\n                'pic_url': item['pic_url'],\n                \"select\": this.selectSearchItem,\n            }\n        return <span key={item['email']}><SearchResult props={props}/></span>\n    }\n    selectSearchItem(item){\n        for(let room in this.state.rooms){\n            if(this.state.rooms[room]['other_email'] === item){\n                this.fetchChats(room)\n                this.setState({activeRoom: room})\n            }\n        }\n        this.setState({searchItem: item})\n    }\n\n    handleChange(event){\n        const {name, value} = event.target\n        this.setState({[name]: value})\n    }\n    handleSubmit(event){\n        event.preventDefault()\n        if (this.state.memo.length > 0) {\n            const checkName = () => {\n                return this.state.activeRoom && this.state.activeRoom in this.state.rooms\n            }\n            const receiver = checkName()?\n                            this.state.rooms[this.state.activeRoom]['other_email']\n                            : this.state.searchItem\n            const room_name = this.state.activeRoom || this.state.searchItem\n            const data = {\n                \"type\": \"message\",\n                \"User\": this.state.user,\n                \"Receiver\": receiver,\n                \"room_name\": room_name,\n                \"memo\": this.state.memo,\n                \"new\": !this.activeRoom? true: \"\"\n            }\n            this.props.socket.send(JSON.stringify(data))\n            this.setState({memo: \"\"})\n        }\n        this.setState({search: []})\n        this.setState({searchItem: \"\"})\n    }\n    addChat(chat) {\n        const chats = this.state.chats\n        chats.push(chat)\n        this.setState({chats: chats})\n        const messages = $(\"#messageSpace\")\n    }\n    sub(){\n        this.props.socket.send(JSON.stringify({\n            'type': 'sub',\n            'room_names': this.state.roomNames,\n            'email': this.state.user\n        }))\n    }\n\n    render(){\n        if(this.state.sub){\n            this.sub()\n            this.setState({sub: false})\n        }\n\n        this.props.socket.onmessage = e => {\n            const data = JSON.parse(e.data)\n            const custom_type = data[\"custom_type\"]\n            if (custom_type === \"message\"){\n                const room_name = data[\"residentRoom\"]\n                if (room_name in this.state.rooms){\n                    this.addChat(data)\n                    this.setState({activeRoom: room_name})\n                }\n                else {\n                    if(data['User'] === this.state.user){\n                        this.fetchChats(room_name)\n                        this.setState({activeRoom: room_name})\n                    }\n                }\n            }else if (custom_type === \"search\"){\n                const matches = data['matches']\n                this.setState({search: matches})\n            }\n            this.fetchConversations()\n            this.sub()\n        }\n\n        return(\n            <div className=\"chat-body\" id=\"chatBody\">\n                {\n                    !this.props.isAuthenticated ? <Redirect push to={\"/auth\"} /> : null\n                }\n                <main className=\"main\" id=\"main\">\n                    <div id=\"chat-box\" className=\"container .rounded\">\n                        <Nav\n                            logout={this.logout}\n                            clear={this.clear}\n                            search={this.search}\n                            serachKey={this.state.searchKey}\n                        />\n                        <div className=\"row\" style={{\"height\": \"100%\"}}>\n                            <div id=\"chatList\" className=\"col-3 hidden-md\">\n                                <div className=\"row mb-3 mt-2\">\n                                    <h3 className=\"m-auto\">\n                                        {\n                                            !(this.state.activeRoom in this.state.rooms)\n                                                ?\n                                            \"Messages\"\n                                                :\n                                            this.state.rooms[this.state.activeRoom]['other_email']\n                                        }\n                                    </h3>\n                                </div>\n                                {\n                                    this.state.roomNames.length > 0 || this.state.search.length > 0\n                                        ?\n                                    !this.state.search.length > 0\n                                                ?\n                                        this.state.roomNames.map(name => this.makeConversation(name))\n                                                :\n                                        this.state.search.map(item => this.makeSearchItem(item))\n                                        :\n                                    null\n                                }\n                            </div>\n                            <div id=\"currentChat\" className=\"col-9\">\n\n                                <div id=\"messageSpace\">\n                                    {\n                                        this.state.activeRoom\n                                            ?\n                                        this.state.chats.map(chat => this.makeChat(chat))\n                                            :\n                                        null\n                                    }\n                                </div>\n\n                                {\n                                    this.state.activeRoom || this.state.searchItem\n                                        ?\n                                    <div className=\"row\" id=\"formHolder\">\n                                        <form className=\"form-inline\" id=\"messageForm\" onSubmit={this.handleSubmit}>\n                                            <textarea\n                                                className=\"form-control\"\n                                                placeholder=\"New Message...\"\n                                                id=\"memo\"\n                                                name=\"memo\"\n                                                cols=\"52\"\n                                                rows=\"1\"\n                                                aria-label=\"New Message\"\n                                                value={this.state.memo}\n                                                onChange={this.handleChange}\n                                            />\n                                            <button\n                                                type=\"submit\"\n                                                className=\"btn btn-success\"\n                                                id=\"msgBtn\">\n                                                <span><i className=\"fa fa-paper-plane fa-2x\" aria-hidden=\"true\" ></i></span>\n                                            </button>\n                                        </form>\n                                    </div>\n                                        :\n                                    null\n                                }\n                            </div>\n                        </div>\n                    </div>\n                </main>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onLogout: () => dispatch(actions.logout()),\n    }\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(ChatBox))","import React, {Component} from 'react'\nimport \"../../profile.css\"\nimport {Redirect, withRouter} from \"react-router\";\nimport {connect} from 'react-redux'\nimport $ from \"jquery\"\n\nclass Profile extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loggedin:null,\n            view: \"read\",\n            profilePicUrl: \"\",\n            coverUrl: `url(${require(\"../../images/default.jpeg\")})`,\n            name: \"\",\n            email: \"\",\n            phone: \"\",\n            age: \"\",\n            gender: \"\",\n            address: \"\",\n            profilePicUpload: null,\n            profilePicExtension: \"\",\n            backup: {},\n            changing: false,\n        }\n\n        // this.user_url = 'http://localhost:8000/authenticate/'\n        this.user_url = `/authenticate/`\n        this._isMounted = false\n        this.setView = this.setView.bind(this)\n        this.onChange = this.onChange.bind(this)\n        this.back = this.back.bind(this)\n        this.save = this.save.bind(this)\n        this.fetchUser = this.fetchUser.bind(this)\n        this.handleErr = this.handleErr.bind(this)\n        this.profilPicUpload = this.profilPicUpload.bind(this)\n        this.getFile = this.getFile.bind(this)\n        this.socketSend = this.socketSend.bind(this)\n        this.ensureProfilePic = this.ensureProfilePic.bind(this)\n    }\n\n    componentDidMount() {\n        this._isMounted = true\n        if(this._isMounted) {\n            this.fetchUser()\n        }\n    }\n    componentWillUnmount() {\n        this._isMounted = false\n    }\n\n    handleErr(res) {\n        if (res.status === 400){\n            this.setState({loggedin: false})\n            throw Error(res.statusText)\n        }\n        return res.json()\n    }\n\n    fetchUser() {\n       fetch(this.user_url, {\n            headers: {\n                Authorization: `Token ${localStorage.getItem(\"token\")}`\n            }\n        }).then(this.handleErr)\n           .then(data => {\n               if(this._isMounted) {\n\n                   this.setState({\n                       profilePicUrl: `http://localhost:8000${data['profile_pic']}`,\n                       coverUrl: `url(http://localhost:8000${data['cover_pic']})`,\n                       name: data['name'],\n                       email: data['email'],\n                       age: data['age']?data['age']:\"\",\n                       gender: data['gender']?data['gender']: \"\",\n                       phone: data['phone']?data['phone']: \"\",\n                       address: data['address']?data['address']: \"\"\n                   })\n               }\n           }).catch(err => console.log(err))\n    }\n\n    back(event) {\n        if(this.state.view === \"edit\") {\n            event.preventDefault()\n            this.setState(this.state.backup)\n            this.setState({view: 'read'})\n        }\n    }\n\n    setView(event){\n        event.preventDefault()\n        if(this.state.view === \"read\") {\n            this.setState({view: 'edit'})\n        }else {\n            this.save()\n            this.setState({view: 'read'})\n        }\n        this.setState({changing: false})\n    }\n\n    onChange(event) {\n        if(!this.state.changing){\n            this.setState({backup: this.state, changing: true})\n        }\n        const {name, value} = event.target\n        this.setState({[name]: value})\n    }\n    ensureProfilePic() {\n        if (!this.state.profilePicUpload) {\n                setTimeout(() => {\n                    this.socketSend()\n            }, 500)\n        }else {\n            return true\n        }\n    }\n    save() {\n        this.socketSend()\n    }\n\n    socketSend() {\n        const signal = this.ensureProfilePic()\n        if (signal){\n            this.props.socket.send(JSON.stringify({\n                'type': 'profile',\n                'user': this.state.user,\n                'data': this.state,\n                'token': localStorage.getItem(\"token\"),\n                'picUpload': this.state.profilePicUpload.result\n            }))\n            this.setState({profilePicUpload: null, profilePicExtension: \"\"})\n        }\n    }\n\n    getFile() {\n        this.setState({backup: this.state})\n        // fileInput is an HTMLInputElement: <input type=\"file\" id=\"myfileinput\" multiple>\n        let fileInput = document.getElementById(\"profileUpload\");\n\n        // files is a FileList object (similar to NodeList)\n        let files = fileInput.files;\n\n        // object for allowed media types\n        let accept = {\n        binary : [\"image/png\", \"image/jpeg\", \"image/jpg\"],\n        text   : [\"text/plain\", \"text/css\", \"application/xml\", \"text/html\"]\n        };\n\n        let file;\n        for (let i = 0; i < files.length; i++) {\n            file = files[i];\n            // if file type could be detected\n            if (file !== null) {\n                this.setState({profilePicExtension: /[.]/.exec(file.name)[0] ? /[^.]+$/.exec(file.name)[0] : undefined})\n                const tempPic = URL.createObjectURL(file)\n                this.setState({profilePicUrl: tempPic})\n                const fileReader = new FileReader()\n                if (accept.binary.indexOf(file.type) > -1) {\n                    // file is a binary, which we accept\n                    fileReader.readAsDataURL(file)\n                    this.setState({profilePicUpload: fileReader})\n                } else if (accept.text.indexOf(file.type) > -1) {\n                    // file is of type text, which we accept\n                    fileReader.readAsArrayBuffer(file)\n                    this.setState({profilePicUpload: fileReader})\n                }else {\n                    this.setState({profilePicUpload: \"nothing\"})\n                }\n            }\n        }\n    }\n    profilPicUpload(event) {\n        $(\"#profileUpload\").click()\n    }\n\n    render() {\n        const fileInput = () => {\n            this.getFile()\n        }\n        const redirectAuth = () => {\n            return <Redirect push to={\"/auth\"} />\n        }\n        this.props.socket.onmessage = e => {\n            const data = JSON.parse(e.data)\n            const custom_type = data[\"custom_type\"]\n            if (custom_type === \"profile\"){\n                this.fetchUser()\n            }\n\n        }\n        return(\n            <span id=\"profile\">\n                {this.state.loggedin === false? redirectAuth(): null}\n                <main>\n                <div id=\"chat-box\" className=\"container .rounded\">\n                    <div className=\"row\" id=\"NavBar\">\n                        <nav className=\"navbar navbar-expand-lg navbar-light bg-light col-12\">\n\n                            <a className=\"navbar-brand\" href=\".\">\n                                <img src={require(\"../../images/chatx.png\")} alt=\"logo\" id=\"logo\"/>\n                                ChatX\n                            </a>\n                            <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\"\n                                    data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\"\n                                    aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                                <span className=\"navbar-toggler-icon\"/>\n                            </button>\n                            <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n                                <ul className=\"navbar-nav ml-auto\">\n                                    <li className=\"nav-item\" onClick={this.back}>\n                                        <a className=\"nav-link btn btn-primary\" href=\"/chat\" style={{\"color\": \"yellow\"}}>Back</a>\n                                    </li>\n                                    <li className=\"nav-item\" onClick={this.setView}>\n                                        <a className=\"nav-link btn btn-primary\" href=\"view\" style={{\"color\": \"yellow\"}}>{\n                                            this.state.view === \"read\"\n                                                ?\n                                            \"Edit\"\n                                                :\n                                            \"Save\"\n                                        }</a>\n                                    </li>\n                                </ul>\n                            </div>\n                        </nav>\n                    </div>\n                    <div className=\"row\" style={{\"height\": \"100%\", \"backgroundColor\": \"#d4e4ec\", \"overflow\": \"scroll\"}}>\n                        <div className=\"col\">\n                            <div>\n                            <div id=\"cover\" className=\"row justify-content-center\" style={{\"backgroundColor\": \"red\", \"backgroundImage\": this.state.coverUrl}}>\n                                <div className=\"imgHolder\" id=\"profileImg\">\n                                    <img src={this.state.profilePicUrl} alt=\"profile pic\" className=\"rounded-circle\" />\n                                    {\n                                        this.state.view === \"read\"\n                                            ?\n                                        null\n                                            :\n                                        <>\n                                            <button type='file' className=\"rounded-circle\" onClick={this.profilPicUpload}>\n                                                <i className=\"fa fa-camera fa-2x\"/>\n                                            </button>\n                                            <input id=\"profileUpload\" type='file' hidden onChange={fileInput}/>\n                                        </>\n                                    }\n\n                                </div>\n                            </div>\n                            </div>\n                            <div id=\"infoHolder\" className=\"row mt-4 mb-1 ml-auto\">\n                                <div className=\"col info-holder\">\n                                    {\n                                        this.state.view === \"read\"\n                                            ?\n                                        <div className={\"input-group col\"} style={{\"width\": \"auto\"}}>\n                                            <div className={\"input-group-prepend\"}>\n                                                <b id=\"namelbl\" className=\"input-group-text\">Name:</b>\n                                            </div>\n                                            <input\n                                                readOnly\n                                                onChange={this.onChange}\n                                                type=\"text\"\n                                                aria-describedby={\"namelbl\"}\n                                                value={this.state.name}\n                                                name=\"name\"\n                                                className={\"form-control\"}/>\n                                        </div>\n                                            :\n                                        <div className={\"input-group col\"} style={{\"width\": \"auto\"}}>\n                                            <div className={\"input-group-prepend\"}>\n                                                <b id=\"namelbl\" className=\"input-group-text\">Name:</b>\n                                            </div>\n                                            <input\n                                                type=\"text\"\n                                                aria-describedby={\"namelbl\"}\n                                                onChange={this.onChange}\n                                                placeholder={\"Name\"}\n                                                name=\"name\"\n                                                value={this.state.name}\n                                            />\n                                        </div>\n                                    }\n\n                                </div>\n                                <div className=\"col info-holder\">\n                                    {\n                                        this.state.view === \"read\"\n                                            ?\n                                        <div className={\"input-group col\"} style={{\"width\": \"auto\"}}>\n                                            <div className={\"input-group-prepend\"}>\n                                                <b id=\"emaillbl\" className=\"input-group-text\">Email:</b>\n                                            </div>\n                                            <input\n                                                readOnly\n                                                onChange={this.onChange}\n                                                type=\"text\"\n                                                aria-describedby={\"emaillbl\"}\n                                                value={this.state.email}\n                                                name=\"email\"\n                                                className={\"form-control\"}/>\n                                        </div>\n                                            :\n                                        <div className={\"input-group col\"} style={{\"width\": \"auto\"}}>\n                                            <div className={\"input-group-prepend\"}>\n                                                <b id=\"emaillbl\" className=\"input-group-text\">Email:</b>\n                                            </div>\n                                            <input\n                                                onChange={this.onChange}\n                                                type=\"text\"\n                                                placeholder={\"example@mail.com\"}\n                                                aria-describedby={\"emaillbl\"}\n                                                value={this.state.email}\n                                                name=\"email\"/>\n                                        </div>\n                                    }\n                                </div>\n                            </div>\n                            <div className=\"row mt-4 mb-1 ml-auto\">\n                                <div className=\"col info-holder\">\n                                    {\n                                        this.state.view === \"read\"\n                                            ?\n                                        <div className={\"input-group col\"} style={{\"width\": \"auto\"}}>\n                                            <div className={\"input-group-prepend\"}>\n                                                <b id=\"agelbl\" className=\"input-group-text\">Age:</b>\n                                            </div>\n                                            <input\n                                                readOnly\n                                                onChange={this.onChange}\n                                                type=\"text\"\n                                                aria-describedby={\"agelbl\"}\n                                                value={this.state.age}\n                                                name=\"age\"\n                                                className={\"form-control\"}/>\n                                        </div>\n                                            :\n                                        <div className={\"input-group col\"} style={{\"width\": \"auto\"}}>\n                                            <div className={\"input-group-prepend\"}>\n                                                <b id=\"agelbl\" className=\"input-group-text\">Age:</b>\n                                            </div>\n                                            <input\n                                                type=\"text\"\n                                                aria-describedby={\"agelbl\"}\n                                                onChange={this.onChange}\n                                                placeholder={\"XXX\"}\n                                                name=\"age\"\n                                                value={this.state.age}/>\n                                        </div>\n                                    }\n                                </div>\n                                <div className=\"col\">\n                                    {\n                                        this.state.view === \"read\"\n                                            ?\n                                        <div className={\"input-group col\"} style={{\"width\": \"auto\"}}>\n                                            <div className={\"input-group-prepend\"}>\n                                                <b id=\"genderlbl\" className=\"input-group-text\">Gender:</b>\n                                            </div>\n                                            <input\n                                                readOnly\n                                                onChange={this.onChange}\n                                                type=\"text\"\n                                                aria-describedby={\"genderlbl\"}\n                                                value={this.state.gender}\n                                                name=\"gender\"\n                                                className={\"form-control\"}/>\n                                        </div>\n                                            :\n                                        <div className={\"input-group col\"} style={{\"width\": \"auto\"}}>\n                                            <div className={\"input-group-prepend\"}>\n                                                <b id=\"genderlbl\" className=\"input-group-text\">Gender:</b>\n                                            </div>\n                                            <input\n                                                type=\"text\"\n                                                aria-describedby={\"genderlbl\"}\n                                                onChange={this.onChange}\n                                                placeholder={\"???\"}\n                                                name=\"gender\"\n                                                value={this.state.gender}/>\n                                        </div>\n                                    }\n                                </div>\n                            </div>\n                            <div className=\"row mt-4 mb-1 ml-auto\">\n                                <div className=\"col info-holder\">\n                                    {\n                                        this.state.view === \"read\"\n                                            ?\n                                            <div className={\"input-group col-5\"} style={{\"width\": \"auto\"}}>\n                                                <div className={\"input-group-prepend\"}>\n                                                    <b id=\"phonelbl\" className=\"input-group-text\">Phone No:</b>\n                                                </div>\n                                                <input\n                                                    readOnly\n                                                    onChange={this.onChange}\n                                                    type=\"text\"\n                                                    aria-describedby={\"phonelbl\"}\n                                                    value={this.state.phone}\n                                                    name=\"phone\"\n                                                    className={\"form-control\"}/>\n                                            </div>\n                                            :\n                                            <div className={\"input-group col\"} style={{\"width\": \"auto\"}}>\n                                                <div className={\"input-group-prepend\"}>\n                                                    <b id=\"phonelbl\" className=\"input-group-text\">Phone No:</b>\n                                                </div>\n                                                <input\n                                                    type=\"text\"\n                                                    aria-describedby={\"phonelbl\"}\n                                                    onChange={this.onChange}\n                                                    placeholder={\"(XXX)-XXX-XXXX\"}\n                                                    name=\"phone\"\n                                                    value={this.state.phone}/>\n                                            </div>\n                                    }\n                                </div>\n                            </div>\n                            <div className=\"row mt-4 mb-1 ml-auto\" >\n                                {\n                                        this.state.view === \"read\"\n                                            ?\n                                        <div className={\"input-group col-12\"}>\n                                            <div className={\"input-group-prepend\"}>\n                                                <b id=\"addresslbl\" className=\"input-group-text\">Address:</b>\n                                            </div>\n                                            <textarea\n                                                readOnly\n                                                onChange={this.onChange}\n                                                aria-describedby={\"addresslbl\"}\n                                                value={this.state.address}\n                                                style={{\"width\": \"80%\"}}\n                                                name=\"address\"\n                                                className={\"form-control\"}/>\n                                        </div>\n                                            :\n                                        <div className={\"input-group col-12\"}>\n                                            <div className={\"input-group-prepend\"}>\n                                                <b id=\"addresslbl\" className=\"input-group-text\">Address:</b>\n                                            </div>\n                                            <textarea\n                                                aria-describedby={\"addresslbl\"}\n                                                onChange={this.onChange}\n                                                placeholder={\"Some address somewhere in the world that I don't know. I also don't really want to know and don't care to know\"}\n                                                style={{\"width\": \"80%\"}}\n                                                name=\"address\"\n                                                value={this.state.address}/>\n                                        </div>\n                                    }\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </main>\n            </span>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n    }\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Profile))","import React, {Component} from \"react\";\nimport Auth from \"./components/auth/auth\";\nimport ChatBox from \"./components/chatMain/chatBox\";\nimport Profile from \"./components/profile/profile\"\nimport {connect} from 'react-redux'\nimport ReconnectingWebSocket from 'reconnecting-websocket'\nimport {Route, Switch,} from \"react-router\";\nimport {BrowserRouter as Router} from \"react-router-dom\";\n\n\nclass MyRouter extends Component {\n    render() {\n        const socket = this.props.socket\n        socket.onopen = e => {\n            console.log(e)\n        }\n        socket.onclose = e => {\n            console.log(e)\n        }\n        socket.onerror = e => {\n            console.log(e)\n        }\n        return(\n            <Router>\n                <Switch>\n                    <Route exact path={'/chat'}><ChatBox {...this.props}/></Route>\n                    <Route exact path={'/auth'}><Auth {...this.props}/></Route>\n                    <Route exact path={'/profile'}><Profile {...this.props}/></Route>\n                </Switch>\n            </Router>\n        )\n    }\n}\n\nconst mapStateToProps = state => {\n    const loc = window.location\n    const proc = loc.protocol === \"http:\"? \"ws:\": \"wss\"\n    let endpoint = `${proc}//${loc.host}:8000/`\n    // let endpoint = `${proc}//${loc.host}`\n    // let endpoint = `${proc}//localhost:8000/`\n    let socket = new ReconnectingWebSocket(endpoint)\n    return {\n        socket: socket\n    }\n}\n\nexport default connect(mapStateToProps, null)(MyRouter)","import React, {Component} from 'react';\nimport MyRouter from \"./router\";\nimport {connect} from 'react-redux'\nimport * as actions from './store/actions/auth';\n\nclass App extends Component{\n    componentDidMount() {\n        this.props.onTryAutoSignup()\n    }\n\n    render() {\n        return (\n            <div className=\"App\">\n              <MyRouter {...this.props}/>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.token !== null\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTryAutoSignup: () => dispatch(actions.authCheckState())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","export const updateObject = (oldObject, updatedProperties) => {\n    return {\n        ...oldObject,\n        ...updatedProperties\n    }\n}","import * as actionTypes from '../actions/actionTypes';\nimport { updateObject } from '../utility';\n\nconst initialState = {\n    token: null,\n    error: null,\n    loading: false\n}\n\nconst authStart = (state, action) => {\n    return updateObject(state, {\n        error: null,\n        loading: true\n    });\n}\n\nconst authSuccess = (state, action) => {\n    return updateObject(state, {\n        token: action.token,\n        error: null,\n        loading: false\n    });\n}\n\nconst authFail = (state, action) => {\n    return updateObject(state, {\n        error: action.error,\n        loading: false\n    });\n}\n\nconst authLogout = (state, action) => {\n    return updateObject(state, {\n        token: null\n    });\n}\n\nconst reducer = (state=initialState, action) => {\n    switch (action.type) {\n        case actionTypes.AUTH_START: return authStart(state, action);\n        case actionTypes.AUTH_SUCCESS: return authSuccess(state, action);\n        case actionTypes.AUTH_FAIL: return authFail(state, action);\n        case actionTypes.AUTH_LOGOUT: return authLogout(state, action);\n        default:\n            return state;\n    }\n}\n\nexport default reducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { createStore, compose, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport reducer from './store/reducers/auth';\n\nconst composeEnhances = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\nconst store = createStore(reducer, composeEnhances(applyMiddleware(thunk)));\n\nconst app = (\n        <Provider store={store}>\n            <App />\n        </Provider>\n)\n\nReactDOM.render(app, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}